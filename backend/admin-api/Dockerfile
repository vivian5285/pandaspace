# ğŸ”¥ ç”¨å®Œæ•´é•œåƒï¼
FROM node:18-alpine

WORKDIR /app

# å¤åˆ¶ package.json å’Œ package-lock.json
COPY package*.json ./

# å®‰è£…ä¾èµ–
RUN npm ci --only=production

# å¤åˆ¶æºä»£ç 
COPY . .

# ç”Ÿæˆ Prisma å®¢æˆ·ç«¯
RUN npx prisma generate

# åˆ›å»ºæ—¥å¿—ç›®å½•
RUN mkdir -p logs

# è®¾ç½®ç¯å¢ƒå˜é‡
ENV NODE_ENV=production
ENV API_TYPE=admin

# æš´éœ²ç«¯å£
EXPOSE 3000

# å¯åŠ¨å‘½ä»¤
CMD ["npm", "start"]
